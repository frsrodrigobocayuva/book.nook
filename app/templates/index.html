{% extends "base.html" %}
{% set active_page = 'search' %}

{% block title %}Book Nook{% endblock %}
{% block header_title %}Search{% endblock %}
{% block content %}
    <div class="col-md-12 p-0">
        <input type="text" class="form-control w-100 mx-auto my-3" style="height: 50px;" placeholder="Search for books, authors, or genres" id="searchInput">
        {% if results %}
            {% for book in results %}
            
            <form action="{{ url_for('Index.add_book') }}" method="POST">
                
                <input type="hidden" name="title" value="{{ book.title }}">
                <input type="hidden" name="authors" value="{{ book.authors }}">
                <input type="hidden" name="publishedDate" value="{{ book.publishedDate }}">
                <input type="hidden" name="thumbnail" value="{{ book.thumbnail }}">
                <input type="hidden" name="google_book_id" value="{{book.id}}">
                <a href="{{ url_for('Index.book_detail', google_book_id=book.id) }}" class="text-decoration-none text-dark">
                    <div class="card col-md-12 d-flex gap-2 flex-row align-items-center my-3 py-3 bg-light hover px-3">
                        
                        <img style="width: 150px;height: 150px;object-fit:contain;border-radius: 5px;" src="{{ book.thumbnail }}">
                        
                        <div class="d-flex flex-column gap-2" style="max-width: max(40vw, 60%);">
                            <h3 style="overflow: hidden;text-overflow: ellipsis; white-space: nowrap;">{{ book.title }}</h3>
                            <p>{{ book.authors }}</p>
                            <p>{{ book.publishedDate }}</p>
                        </div>
                        {% if book.in_shelf %}
                            <button type="submit" class="btn btn-danger ms-auto me-3" formaction="{{ url_for('Index.remove_book') }}">
                                Remove from Shelf
                            </button>
                        {% else %}
                            <button type="submit" class="btn btn-success ms-auto me-3">Add to Shelf</button>
                        {% endif %}
                    </div>
                </a>
            </form>
        {% endfor %}
    {% else %}
        <div class="d-flex align-items-center justify-content-center flex-column my-5">
                <svg width="64px" height="64px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#6d7a66"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M16.6725 16.6412L21 21M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z" stroke="#6d7a66" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                <h2 style="color: #6d7a66;">Nenhum resultado encontrado.</h2>
        </div>
       
    {% endif %}
    </div>
{% endblock %}